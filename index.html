<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Webcom C SDK: Webcom C SDK Documentation Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Webcom C SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Webcom C SDK Documentation Page </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This is the documentation for the Webcom C SDK, a SDK that allows connecting to, and interacting with the Webcom platform.</p>
<h1>What is Webcom?</h1>
<p>Webcom is a Backend As A Service platform offering</p>
<ul>
<li>a data sync service,</li>
<li>an authentication service.</li>
</ul>
<p>Orange operates a Webcom-based service named <a href="https://io.datasync.orange.com">Orange Flexible Datasync</a>. Create an account on <a href="https://io.datasync.orange.com/u/signup">https://io.datasync.orange.com/u/signup</a> to start using webcom.</p>
<h1>Get the C SDK</h1>
<p>The SDK is published on GitHub: <a href="https://github.com/webcom-components/webcom-sdk-c">https://github.com/webcom-components/webcom-sdk-c</a></p>
<p>You'll find informations on the supported platforms, building or getting binary versions in the README.md document.</p>
<h1>Use the SDK</h1>
<p>Browse the <a href="modules.html">modules</a> page to get informations on the API.</p>
<h1>Show me the code!</h1>
<p>OK.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="webcom_8h.html">webcom-c/webcom.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="webcom-libev_8h.html">webcom-c/webcom-libev.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[]) {</div><div class="line">    <a class="code" href="webcom-base_8h.html#a051343fad7858528b7f9e110354c9305">wc_context_t</a> *ctx;</div><div class="line"></div><div class="line">    <span class="comment">// get a libev event loop</span></div><div class="line">    <span class="keyword">struct </span>ev_loop *loop = EV_DEFAULT;</div><div class="line"></div><div class="line">    <span class="comment">// set a bunch of general-purpose datasync callbacks</span></div><div class="line">    <span class="keyword">struct </span><a class="code" href="structwc__eli__callbacks.html">wc_eli_callbacks</a> cb = {</div><div class="line">            .<a class="code" href="structwc__eli__callbacks.html#ac10537271445d1cff3aacbb37f933a76">on_connected</a> = <a class="code" href="structwc__eli__callbacks.html#ac10537271445d1cff3aacbb37f933a76">on_connected</a>,</div><div class="line">            .on_disconnected = <a class="code" href="structwc__eli__callbacks.html#a078bec4de1cc677bd121c48dd8a05a73">on_disconnected</a>,</div><div class="line">            .on_error = <a class="code" href="structwc__eli__callbacks.html#a21ce2c98a38c884009702ebfac42eb3f">on_error</a>,</div><div class="line">    };</div><div class="line">    <span class="comment">// set the connection options</span></div><div class="line">    <span class="keyword">struct </span><a class="code" href="structwc__context__options.html">wc_context_options</a> options = {</div><div class="line">            .<a class="code" href="structwc__context__options.html#a8fd6f66f7b865a3b051e3e3bddbaadf6">host</a> = <span class="stringliteral">&quot;io.datasync.orange.com&quot;</span>,</div><div class="line">            .port = 443,</div><div class="line">            .app_name = <span class="stringliteral">&quot;my_namespace&quot;</span>,</div><div class="line">    };</div><div class="line"></div><div class="line">    <span class="comment">// establish the connection to the webcom server, and let it integrate in</span></div><div class="line">    <span class="comment">// our libev event loop</span></div><div class="line">    ctx = <a class="code" href="group__webcom-libev.html#ga9f8150d8e370fe84cdb564401ea475f0">wc_context_create_with_libev</a>(</div><div class="line">            &amp;options,</div><div class="line">            loop,</div><div class="line">            &amp;cb);</div><div class="line"></div><div class="line">    <span class="comment">// we are going to use the datasync service</span></div><div class="line">    <a class="code" href="group__webcom-datasync-cnx.html#ga124f08e50cd06a2a76f26e790c06d57e">wc_datasync_init</a>(ctx);</div><div class="line"></div><div class="line">    <span class="comment">// ask the SDK to establish the connection to the server</span></div><div class="line">    <a class="code" href="group__webcom-datasync-cnx.html#gabe003e7acb355902454f863c522197fd">wc_datasync_connect</a>(ctx);</div><div class="line"></div><div class="line">    <span class="comment">// enter the event loop</span></div><div class="line">    ev_run(loop, 0);</div><div class="line"></div><div class="line">    <span class="comment">// destroy the context when the loop ends</span></div><div class="line">    <a class="code" href="group__webcom-base.html#ga3102ec8e7171513da15e7c154bb31ec6">wc_context_destroy</a>(ctx);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// called when the connection to the server is established</span></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> on_connected(<a class="code" href="webcom-base_8h.html#a051343fad7858528b7f9e110354c9305">wc_context_t</a> *ctx) {</div><div class="line">    <a class="code" href="group__webcom-on.html#gafa0f4d235be4df510586febae3e4adce">wc_datasync_on_child_added</a>(ctx, <span class="stringliteral">&quot;/foo/bar&quot;</span>, on_foo_bar_added);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// called whenever a new child node is appended to /foo/bar</span></div><div class="line"><span class="keywordtype">int</span> on_foo_bar_added(<a class="code" href="webcom-base_8h.html#a051343fad7858528b7f9e110354c9305">wc_context_t</a> *ctx, <a class="code" href="group__webcom-on.html#ga4ab0013565ccb2d36087ea1d0da740a6">on_handle_t</a> handle, <span class="keywordtype">char</span> *data, <span class="keywordtype">char</span> *cur, <span class="keywordtype">char</span> *prev) {</div><div class="line">    printf(<span class="stringliteral">&quot;a new child named [%s] with value [%s] was added on path /foo/bar\n&quot;</span>, cur, data);</div><div class="line">    <span class="keywordflow">return</span> 1;</div><div class="line">}</div><div class="line"></div><div class="line">(...)</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Oct 18 2018 09:31:46 for Webcom C SDK by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
